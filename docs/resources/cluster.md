---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "hcs_cluster Resource - terraform-provider-hcs"
subcategory: ""
description: |-
  The cluster resource allows you to manage an HCS Azure Managed Application.
---

# hcs_cluster (Resource)

The cluster resource allows you to manage an HCS Azure Managed Application.

## Example Usage

```terraform
data "hcs_consul_versions" "default" {}

data "hcs_plan_defaults" "default" {}

resource "hcs_cluster" "example" {
  resource_group_name      = var.resource_group_name
  managed_application_name = var.managed_application_name
  email                    = var.email
  cluster_mode             = var.cluster_mode
  vnet_cidr                = var.vnet_cidr
  min_consul_version       = data.hcs_consul_versions.default.recommended
  location                 = var.location
  plan_name                = data.hcs_plan_defaults.default.plan_name
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **cluster_mode** (String) The mode of the cluster ('Development' or 'Production'). Development clusters only have a single Consul server. Production clusters are fully supported, full featured, and deploy with a minimum of three hosts.
- **email** (String) The contact email for the primary owner of the cluster.
- **managed_application_name** (String) The name of the HCS Azure Managed Application.
- **resource_group_name** (String) The name of the Resource Group in which the HCS Azure Managed Application belongs.

### Optional

- **cluster_name** (String) The name of the cluster Managed Resource. If not specified, it is defaulted to the value of `managed_application_name`.
- **consul_datacenter** (String) The Consul data center name of the cluster. If not specified, it is defaulted to the value of `managed_application_name`.
- **consul_external_endpoint** (Boolean) Denotes that the cluster has an external endpoint for the Consul UI. Defaults to `false`.
- **consul_federation_token** (String) The token used to join a federation of Consul clusters. If the cluster is not part of a federation, this field will be empty.
- **id** (String) The ID of this resource.
- **location** (String) The Azure region that the cluster is deployed to. If not specified, it is defaulted to the region of the Resource Group the Managed Application belongs to.
- **managed_resource_group_name** (String) The name of the Managed Resource Group in which the cluster resources belong. If not specified, it is defaulted to the value of `managed_application_name` with 'mrg-' prepended.
- **min_consul_version** (String) The minimum Consul version of the cluster. If not specified, it is defaulted to the version that is currently recommended by HCS.
- **plan_name** (String) The name of the Azure Marketplace HCS plan for the cluster. If not specified, it will default to the current HCS default plan (see the `hcs_plan_defaults` data source).
- **tags** (Map of String) A mapping of tags to assign to the HCS Azure Managed Application resource.
- **timeouts** (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))
- **vnet_cidr** (String) The VNET CIDR range of the Consul cluster. Defaults to `172.25.16.0/24`.

### Read-Only

- **blob_container_name** (String) The name of the Blob Container in which cluster data is persisted.
- **consul_automatic_upgrades** (Boolean) Denotes that automatic Consul upgrades are enabled.
- **consul_ca_file** (String) The cluster CA file encoded as a Base64 string.
- **consul_cluster_id** (String) The cluster ID.
- **consul_config_file** (String) The cluster config encoded as a Base64 string.
- **consul_connect** (Boolean) Denotes that Consul connect is enabled.
- **consul_external_endpoint_url** (String) The public URL for the Consul UI. This will be empty if `consul_external_endpoint` is `true`.
- **consul_private_endpoint_url** (String) The private URL for the Consul UI.
- **consul_root_token_accessor_id** (String) The accessor ID of the root ACL token that is generated upon cluster creation. If a new root token is generated using the `hcs_cluster_root_token` resource, this field is no longer valid.
- **consul_root_token_secret_id** (String, Sensitive) The secret ID of the root ACL token that is generated upon cluster creation. If a new root token is generated using the `hcs_cluster_root_token` resource, this field is no longer valid.
- **consul_snapshot_interval** (String) The Consul snapshot interval.
- **consul_snapshot_retention** (String) The retention policy for Consul snapshots.
- **consul_version** (String) The Consul version of the cluster.
- **managed_application_id** (String) The ID of the Managed Application.
- **state** (String) The state of the cluster.
- **storage_account_name** (String) The name of the Storage Account in which cluster data is persisted.
- **storage_account_resource_group** (String) The name of the Storage Account's Resource Group.
- **vnet_id** (String) The ID of the cluster's managed VNet.
- **vnet_name** (String) The name of the cluster's managed VNet.
- **vnet_resource_group_name** (String) The resource group that the cluster's managed VNet belongs to. This will be the same value as `managed_resource_group_name`.

<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- **create** (String)
- **default** (String)
- **delete** (String)
- **update** (String)

## Import

Import is supported using the following syntax:

```shell
# The import ID is {Managed Application ID}:{Cluster Name}
terraform import hcs_cluster.example /subscriptions/1234-5678-91011-1213-141516/resourceGroups/hcs-tf-example/providers/Microsoft.Solutions/applications/hcs-tf-example:hcs-tf-example
```
